# üì¶ Yandex.Cloud Terraform Deployment with PostgreSQL and Python Web App

## ‚úÖ –ß—Ç–æ –¥–µ–ª–∞–µ—Ç —ç—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç

–≠—Ç–æ—Ç Terraform-–ø—Ä–æ–µ–∫—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. –°–æ–∑–¥–∞—ë—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é –º–∞—à–∏–Ω—É –≤ –Ø–Ω–¥–µ–∫—Å.–û–±–ª–∞–∫–µ (Ubuntu 22.04, 2 vCPU, 2 GB RAM, 20 GB HDD)
2. –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç Docker –∏ PostgreSQL (–Ω–∞—Ç–∏–≤–Ω–æ, –±–µ–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞)
3. –ö–ª–æ–Ω–∏—Ä—É–µ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π `DEVOPS-praktikum_Docker`
4. –ö–æ–ø–∏—Ä—É–µ—Ç `web.py` –∏ `web.conf` –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é `/srv/app/`
5. –ü–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π IP-–∞–¥—Ä–µ—Å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä `db_host` –≤ `web.conf`
6. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø–æ—Ä—Ç 5432 –¥–ª—è –≤–Ω–µ—à–Ω–µ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î

## üõ† –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ [Yandex.Cloud CLI](https://cloud.yandex.ru/docs/cli/quickstart) –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
   ```bash
   yc iam create-token
   ```

2. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–∞–π–ª `terraform.tfvars`:
   ```hcl
   token     = "–≤–∞—à_oauth_—Ç–æ–∫–µ–Ω"
   cloud_id  = "–≤–∞—à_cloud_id"
   folder_id = "–≤–∞—à_folder_id"
   ```

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ:
   ```bash
   terraform init
   terraform apply -auto-approve
   ```

## üîó –ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞

- IP-–∞–¥—Ä–µ—Å –í–ú –±—É–¥–µ—Ç –≤—ã–≤–µ–¥–µ–Ω –∫–∞–∫ output
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞ –ø–æ—Ä—Ç—É `80` (–µ—Å–ª–∏ –≤—ã –≤—Ä—É—á–Ω—É—é –∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–∞ –æ—Å–Ω–æ–≤–µ web.py)
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL:
  ```bash
  psql -h <–≤–Ω–µ—à–Ω–∏–π_ip> -U myuser -d mydb
  ```

## üßæ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è PostgreSQL

- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: `myuser`
- –ü–∞—Ä–æ–ª—å: `Amsterdamtoday2025!`
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: `mydb`

## ‚ö†Ô∏è –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ

- –§–∞–π–ª `web.py` **–Ω–µ –∑–∞–º–µ–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
- –î–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é —Å–æ–±—Ä–∞—Ç—å Docker-–æ–±—Ä–∞–∑ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º `/srv/app`